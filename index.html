<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Instrument Transposer</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  body {
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    background: linear-gradient(135deg, #1e1e2f, #2e2e3f);
    color: #fff;
    padding: 20px;
    overflow-x: hidden;
  }

  h1 {
    margin-top: 30px;
    font-weight: 700;
    font-size: 2rem;
    text-align: center;
  }

  .container {
    margin-top: 20px;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(12px);
    border-radius: 20px;
    padding: 30px;
    max-width: 400px;
    width: 100%;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  }

  label {
    display: block;
    margin-top: 15px;
    font-weight: 500;
  }

  select, button, input {
    margin-top: 10px;
    padding: 10px 14px;
    font-size: 1rem;
    border-radius: 10px;
    border: none;
    outline: none;
  }

  select, input {
    width: 100%;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    text-align: center;
    font-weight: 500;
  }

  button {
    width: 100%;
    cursor: pointer;
    background: #6a5acd;
    color: #fff;
    font-weight: 600;
    margin-top: 20px;
    transition: 0.3s ease;
  }

  button:hover {
    background: #7b6cfb;
  }

  .output {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
  }

  @media (max-width: 500px) {
    .container {
      padding: 20px;
    }
  }
</style>
</head>
<body>

<h1>Advanced Instrument Transposer</h1>

<div class="container">
  <label for="note">Input Note:</label>
  <select id="note">
    <option value="C">C</option>
    <option value="C#">C#/Db</option>
    <option value="D">D</option>
    <option value="D#">D#/Eb</option>
    <option value="E">E</option>
    <option value="F">F</option>
    <option value="F#">F#/Gb</option>
    <option value="G">G</option>
    <option value="G#">G#/Ab</option>
    <option value="A">A</option>
    <option value="A#">A#/Bb</option>
    <option value="B">B</option>
  </select>

  <label for="fromInstrument">From Instrument:</label>
  <select id="fromInstrument">
    <option value="C">C (Piano, Flute)</option>
    <option value="Bb">Bb (Trumpet, Clarinet, Tenor Sax)</option>
    <option value="Eb">Eb (Alto Sax, Baritone Sax)</option>
    <option value="F">F (French Horn, Mellophone)</option>
    <option value="Db">Db (Piccolo Trumpet)</option>
    <option value="G">G (G Clarinet)</option>
    <option value="A">A (A Clarinet)</option>
  </select>

  <label for="toInstrument">To Instrument:</label>
  <select id="toInstrument">
    <option value="C">C (Piano, Flute)</option>
    <option value="Bb">Bb (Trumpet, Clarinet, Tenor Sax)</option>
    <option value="Eb">Eb (Alto Sax, Baritone Sax)</option>
    <option value="F">F (French Horn, Mellophone)</option>
    <option value="Db">Db (Piccolo Trumpet)</option>
    <option value="G">G (G Clarinet)</option>
    <option value="A">A (A Clarinet)</option>
  </select>

  <button onclick="transpose()">Transpose</button>

  <div class="output">
    <label>Transposed Note:</label>
    <input type="text" id="outputNote" readonly>
  </div>
  <div class="output">
    <label>Semitone Difference:</label>
    <input type="text" id="semitoneDiff" readonly>
  </div>
</div>

<script>
const notesSharp = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
const notesFlat  = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];

// Map instrument to semitone difference from concert pitch
const transpositionMap = {
  'C': 0,
  'Bb': 2,
  'Eb': -3,
  'F': 7,
  'Db': 1,
  'G': -5, // G clarinet sounds a perfect fourth higher (relative to C)
  'A': -9  // A clarinet sounds a minor sixth higher
};

// Helper to pick flat/sharp preference
function getEnharmonic(noteIndex) {
  // Prefer flats for common band instruments
  return notesFlat[noteIndex % 12];
}

function transpose() {
  let note = document.getElementById('note').value;
  const fromInst = document.getElementById('fromInstrument').value;
  const toInst = document.getElementById('toInstrument').value;

  // Normalize sharps to index
  const noteIndex = notesSharp.indexOf(note.split('/')[0]); // take first if dual (C#/Db)

  const interval = transpositionMap[toInst] - transpositionMap[fromInst];
  const transposedIndex = (noteIndex + interval + 12) % 12;

  document.getElementById('outputNote').value = getEnharmonic(transposedIndex);
  document.getElementById('semitoneDiff').value = interval;
}
</script>

</body>
</html>
